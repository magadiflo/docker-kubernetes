# Secci√≥n 15: Kubernetes: Vol√∫menes

---

## [üì¶ Introducci√≥n a los Vol√∫menes en Kubernetes](https://kubernetes.io/docs/concepts/storage/volumes/)

En Kubernetes, `los archivos almacenados dentro de un contenedor son ef√≠meros`, lo que representa ciertos desaf√≠os para
aplicaciones que requieren persistencia de datos o almacenamiento compartido.

### üß® Problemas comunes sin vol√∫menes

1. `P√©rdida de datos al reiniciar el contenedor`: Si un contenedor se bloquea o se detiene, todos los archivos creados o
   modificados durante su ejecuci√≥n se pierden, ya que el sistema de archivos del contenedor se reinicia con un estado
   limpio cuando el `kubelet` lo vuelve a lanzar.


2. `Dificultad para compartir datos entre contenedores del mismo Pod`: En situaciones donde m√∫ltiples contenedores
   comparten un Pod, puede ser complicado habilitar un sistema de archivos com√∫n entre ellos sin una soluci√≥n adecuada.

### ‚úÖ ¬øC√≥mo lo resuelve Kubernetes?

Para abordar estos problemas, `Kubernetes introduce la abstracci√≥n de volumen`. Esta permite proporcionar
almacenamiento persistente o compartido a los contenedores dentro de un Pod.

> üìå Un `volumen en Kubernetes` es b√°sicamente un directorio accesible desde uno o varios contenedores del Pod, que
> puede estar respaldado por distintos medios de almacenamiento, seg√∫n el tipo de volumen utilizado.

### üß± Tipos de vol√∫menes

Kubernetes soporta diversos tipos de vol√∫menes, y un Pod puede montar varios de ellos simult√°neamente. Se clasifican, de
forma general, en:

- `Vol√∫menes ef√≠meros`: Existen √∫nicamente durante la vida del Pod. Cuando este se elimina, el volumen tambi√©n se
  destruye.

- `Vol√∫menes persistentes`: Sobreviven incluso despu√©s de que el Pod se elimina. Su ciclo de vida es independiente del
  Pod, permitiendo que los datos se mantengan y puedan ser reutilizados por nuevos Pods.

> üîÅ Un volumen, sin importar su tipo, conserva sus datos durante los reinicios de los contenedores dentro del
> mismo Pod. Sin embargo, solo los vol√∫menes persistentes sobreviven a la eliminaci√≥n del Pod completo.

### üí° Ejemplo simple

Sup√≥n que tienes un Pod con un volumen `emptyDir` (el volumen se monta dentro del pod), y un contenedor escribe un
archivo ah√≠. Si el contenedor se reinicia por error interno, `el archivo sigue estando presente` en ese volumen cuando
el contenedor se vuelve a iniciar.

Sin embargo, si se elimina el `Pod` completo, entonces:

- Si era un `volumen ef√≠mero` (`emptyDir`), el contenido se borra.
- Si era un `volumen persistente` (como un `persistentVolumeClaim`), los datos se conservan, incluso despu√©s de
  eliminar el Pod.
